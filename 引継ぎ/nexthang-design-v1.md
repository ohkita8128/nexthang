# NextHang è¨­è¨ˆæ›¸ v1.0

> æœ€çµ‚æ›´æ–°: 2026å¹´1æœˆ31æ—¥

---

## ğŸ“Œ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| **åç§°** | NextHangï¼ˆæš«å®šï¼‰ |
| **ç›®çš„** | äºˆå®šãŒå­˜åœ¨ã—ãªã„ã¾ã¾æ™‚é–“ãŒéãã‚‹å•é¡Œã‚’è§£æ±º |
| **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ** | ä»²è‰¯ã—ã ã‘ã©å‹•ã‹ãªã„å‹é”ã‚°ãƒ«ãƒ¼ãƒ— |
| **å½¢æ…‹** | LINE Bot + ç®¡ç†ç”»é¢ï¼ˆLIFFï¼‰ |

### è§£æ±ºã™ã‚‹èª²é¡Œ

```
âŒ å¾“æ¥ã®å•é¡Œ
â”œâ”€â”€ æ—¥ç¨‹èª¿æ•´ãŒé¢å€’
â”œâ”€â”€ å¹¹äº‹ãŒã„ãªã„
â”œâ”€â”€ èª˜ã†ã®ãŒå¿ƒç†çš„ã«é‡ã„
â””â”€â”€ äºˆå®šãŒå­˜åœ¨ã—ãªã„ã¾ã¾æ™‚é–“ãŒéãã‚‹ â† çœŸã®èª²é¡Œ

âœ… NextHang ã®è§£æ±ºç­–
â”œâ”€â”€ Bot ãŒè‡ªå‹•ã§èª˜ã†ï¼ˆèª°ã‚‚è¨€ã„å‡ºã•ãªãã¦ã„ã„ï¼‰
â”œâ”€â”€ æ—¥ä»˜ãªã—ã§ã€Œè¡ŒããŸã„ã€ã‚’æºœã‚ã‚‰ã‚Œã‚‹
â”œâ”€â”€ äººæ•°é›†ã¾ã‚‰ãªãã¦ã‚‚å¤±æ•—ã«ãªã‚‰ãªã„
â””â”€â”€ å…¨éƒ¨ LINE å†…ã§å®Œçµ
```

---

## ğŸ— æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | å‚™è€ƒ |
|---------|------|------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Next.js 14 (App Router) | |
| è¨€èª | TypeScript | |
| ã‚¹ã‚¿ã‚¤ãƒ« | Tailwind CSS | |
| DB | Supabase (PostgreSQL) | |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Vercel | |
| å®šæœŸå®Ÿè¡Œ | Supabase Edge Functions | |
| Bot | LINE Messaging API | |
| ç®¡ç†ç”»é¢ | LIFF | LINE Front-end Framework |

### ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

| è¦æ¨¡ | æœˆé¡ |
|------|------|
| å‹é”ï¼ˆã€œ10ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ | 0å†† |
| ä¸­è¦æ¨¡ï¼ˆã€œ100ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ | 0ã€œ1,000å†† |
| å¤§è¦æ¨¡ï¼ˆ1000ã‚°ãƒ«ãƒ¼ãƒ—ã€œï¼‰ | 3,000ã€œ10,000å†† |

---

## ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ãƒ¦ãƒ¼ã‚¶ãƒ¼                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
                    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LINE ãƒˆãƒ¼ã‚¯ç”»é¢         â”‚   â”‚    LIFFï¼ˆç®¡ç†ç”»é¢ï¼‰          â”‚
â”‚  ãƒ»Bot ã‹ã‚‰ã®é€šçŸ¥å—ä¿¡        â”‚   â”‚  ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º            â”‚
â”‚  ãƒ»ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼            â”‚   â”‚  ãƒ»æ—¥ç¨‹æŠ•ç¥¨                  â”‚
â”‚  ãƒ»ç°¡æ˜“è¿”ä¿¡                  â”‚   â”‚  ãƒ»è¡ŒããŸã„ãƒªã‚¹ãƒˆ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                  â”‚
               â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LINE Messaging API                           â”‚
â”‚                  ï¼ˆWebhook / Push Messageï¼‰                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Next.js on Vercel                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  /api/webhook       â”‚  â”‚  /liff/*                        â”‚  â”‚
â”‚  â”‚  LINE ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡   â”‚  â”‚  ç®¡ç†ç”»é¢ãƒšãƒ¼ã‚¸                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Supabase                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚  Auth        â”‚  â”‚  Edge Functions      â”‚  â”‚
â”‚  â”‚  ãƒ‡ãƒ¼ã‚¿ä¿å­˜   â”‚  â”‚  (ä½¿ã‚ãªã„)  â”‚  â”‚  å®šæœŸå®Ÿè¡Œ            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ æ©Ÿèƒ½ä¸€è¦§

### Phase 1ï¼šMVPï¼ˆæœ€å°é™ã§ä¾¡å€¤ãŒå‡ºã‚‹ï¼‰

| # | æ©Ÿèƒ½ | èª¬æ˜ |
|---|------|------|
| 1 | å®šæœŸãŠèª˜ã„é€ä¿¡ | Bot ãŒè‡ªå‹•ã§ã€Œãã‚ãã‚éŠã³ã¾ã›ã‚“ã‹ï¼Ÿã€ã¨ã‚°ãƒ«ãƒ¼ãƒ—ã«é€ä¿¡ |
| 2 | é »åº¦è¨­å®š | ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«æ¯é€±/2é€±é–“/æœˆ1/ã‚ªãƒ•ã‚’é¸æŠå¯èƒ½ |
| 3 | æ—¥ç¨‹æŠ•ç¥¨ | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã§å€™è£œæ—¥ã« â—‹â–³âœ• ã‚’ã¤ã‘ã‚‹ |
| 4 | ãƒªãƒã‚¤ãƒ³ãƒ‰ | 1é€±é–“å‰ãƒ»å‰æ—¥ãƒ»å½“æ—¥ã« Bot ãŒè‡ªå‹•é€šçŸ¥ |
| 5 | ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ãƒˆãƒ¼ã‚¯ç”»é¢ä¸‹éƒ¨ã«å¸¸è¨­ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã‚¿ãƒƒãƒ—ã§ç®¡ç†ç”»é¢ã¸ |
| 6 | ç®¡ç†ç”»é¢ï¼ˆLIFFï¼‰ | LINEå†…ã§é–‹ãWebã‚¢ãƒ—ãƒªã€ãƒ­ã‚°ã‚¤ãƒ³ä¸è¦ |

### Phase 2ï¼šå·®åˆ¥åŒ–ï¼ˆç‹¬è‡ªã®ä¾¡å€¤ï¼‰

| # | æ©Ÿèƒ½ | èª¬æ˜ |
|---|------|------|
| 7 | è¡ŒããŸã„äºˆå®šï¼ˆæ—¥ä»˜ãªã—ï¼‰ | ã€Œãƒ¦ãƒ‹ãƒè¡ŒããŸã„ã€ãªã©æ—¥ä»˜æœªå®šã§ç™»éŒ²ã§ãã‚‹ |
| 8 | èˆˆå‘³æŠ•ç¥¨ | è¡ŒããŸã„äºˆå®šã«ã€Œæ°—ã«ãªã‚‹ã€ã‚’æŠ¼ã›ã‚‹ã€é–¾å€¤è¶…ãˆãŸã‚‰æ—¥ç¨‹æŠ•ç¥¨ã¸ |
| 9 | åŒ¿å/é¡•ååˆ‡ã‚Šæ›¿ãˆ | äºˆå®šè¿½åŠ æ™‚ã«åå‰ã‚’å‡ºã™ã‹é¸ã¹ã‚‹ |
| 10 | äººæ•°ä¸è¶³â†’ä¿ç•™ | é›†ã¾ã‚‰ãªã‹ã£ãŸã‚‰å¤±æ•—æ‰±ã„ã›ãšç¿Œæœˆã«è‡ªå‹•å¾©æ´» |
| 11 | è¿‘ã„äºˆå®šã®ã¾ã¨ã‚æŠ•ç¥¨ | 7æ—¥ä»¥å†…ã®äºˆå®šã¯1ç”»é¢ã§ã¾ã¨ã‚ã¦æŠ•ç¥¨ |
| 12 | æŠ•ç¥¨çµæœã®æ¯”è¼ƒè¡¨ç¤º | ã©ã®æ—¥ç¨‹ãŒä¸€ç•ªäººæ°—ã‹ä¸€ç›®ã§ã‚ã‹ã‚‹ |

### Phase 3ï¼šç™ºå±•ï¼ˆå°†æ¥æ©Ÿèƒ½ï¼‰

| # | æ©Ÿèƒ½ | èª¬æ˜ |
|---|------|------|
| 13 | ãŠã™ã™ã‚ææ¡ˆ | éå»ã®äººæ°—äºˆå®šãƒ»å­£ç¯€ã‚¤ãƒ™ãƒ³ãƒˆã‚’Bot ãŒææ¡ˆ |
| 14 | Google Calendaré€£æº | å€‹äººã®äºˆå®šã‚’è¦‹ã¦ç©ºãæ—¥ç¨‹ã‚’è‡ªå‹•åˆ¤å®š |
| 15 | å¹´é–“ãƒ¬ãƒãƒ¼ãƒˆ | ã€Œä»Šå¹´ã¯8å›é›†ã¾ã‚Šã¾ã—ãŸã€ãªã©ã®æŒ¯ã‚Šè¿”ã‚Š |
| 16 | äºˆç®—æ„Ÿå…±æœ‰ | ã€Œä»Šå›ã¯3000å††ãã‚‰ã„ã§ã€ã‚’äº‹å‰è¨­å®š |
| 17 | æ€ã„å‡ºé€£æº | çµ‚ã‚ã£ãŸäºˆå®šã«å†™çœŸã‚’ç´ä»˜ã‘ |
| 18 | è¨˜å¿µæ—¥ãƒªãƒã‚¤ãƒ³ãƒ‰ | ã€Œã‚°ãƒ«ãƒ¼ãƒ—çµæˆ3å¹´ã§ã™ã€ãªã© |

---

## ğŸ”„ çŠ¶æ…‹é·ç§»

### äºˆå®šï¼ˆEventï¼‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   voting     â”‚ â† æ—¥ç¨‹æŠ•ç¥¨ä¸­
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚confirmed â”‚    â”‚ pending  â”‚    â”‚cancelled â”‚
    â”‚ï¼ˆç¢ºå®šï¼‰   â”‚    â”‚ï¼ˆä¿ç•™ï¼‰   â”‚    â”‚ï¼ˆä¸­æ­¢ï¼‰   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚
         â”‚               â–¼
         â”‚         æ¬¡æœˆã«å¾©æ´»
         â”‚         ï¼ˆvoting ã¸ï¼‰
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚completed â”‚ â† çµ‚äº†å¾Œ
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡ŒããŸã„ï¼ˆWishï¼‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   open   â”‚ â† èˆˆå‘³é›†ã‚ä¸­
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚ é–¾å€¤è¶…ãˆ
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  voting  â”‚ â† æ—¥ç¨‹æŠ•ç¥¨ä¸­ï¼ˆEventä½œæˆï¼‰
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚converted â”‚ â† äºˆå®šã«å¤‰æ›æ¸ˆã¿
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â€» archived = å¤ããªã£ã¦éè¡¨ç¤º
```

---

## ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚     â”‚   groups    â”‚     â”‚  group_     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     â”‚  members    â”‚
â”‚ id (PK)     â”‚â—„â”€â”€â”€â”€â”‚ created_by  â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ line_user_idâ”‚     â”‚ id (PK)     â”‚â—„â”€â”€â”€â”€â”‚ group_id    â”‚
â”‚ display_nameâ”‚     â”‚ line_group_ â”‚     â”‚ user_id     â”‚â”€â”€â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ picture_url â”‚     â”‚   id        â”‚     â”‚ role        â”‚     â”‚   users     â”‚
â”‚ created_at  â”‚     â”‚ name        â”‚     â”‚ joined_at   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ settings    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ created_at  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   events    â”‚   â”‚   wishes    â”‚   â”‚  reminders  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚   â”‚ id (PK)     â”‚   â”‚ id (PK)     â”‚
â”‚ group_id    â”‚   â”‚ group_id    â”‚   â”‚ group_id    â”‚
â”‚ title       â”‚   â”‚ title       â”‚   â”‚ type        â”‚
â”‚ date        â”‚   â”‚ created_by  â”‚   â”‚ scheduled_atâ”‚
â”‚ status      â”‚   â”‚ is_anonymousâ”‚   â”‚ sent_at     â”‚
â”‚ created_by  â”‚   â”‚ status      â”‚   â”‚ event_id    â”‚
â”‚ created_at  â”‚   â”‚ created_at  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                 â”‚
      â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   votes     â”‚   â”‚  interests  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚   â”‚ id (PK)     â”‚
â”‚ event_id    â”‚   â”‚ wish_id     â”‚
â”‚ user_id     â”‚   â”‚ user_id     â”‚
â”‚ date        â”‚   â”‚ created_at  â”‚
â”‚ response    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_at  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| line_user_id | text | LINE ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆä¸€æ„ï¼‰ |
| display_name | text | LINE ã®è¡¨ç¤ºå |
| picture_url | text | LINE ã®ã‚¢ã‚¤ã‚³ãƒ³URL |
| created_at | timestamp | ç™»éŒ²æ—¥æ™‚ |
| updated_at | timestamp | æ›´æ–°æ—¥æ™‚ |

```sql
CREATE TABLE users (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  line_user_id text UNIQUE NOT NULL,
  display_name text,
  picture_url text,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

CREATE INDEX idx_users_line_user_id ON users(line_user_id);
```

#### groupsï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| line_group_id | text | LINE ã®ã‚°ãƒ«ãƒ¼ãƒ—IDï¼ˆä¸€æ„ï¼‰ |
| name | text | ã‚°ãƒ«ãƒ¼ãƒ—åï¼ˆä»»æ„ï¼‰ |
| created_by | uuid | è¿½åŠ ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆFK â†’ usersï¼‰ |
| settings | jsonb | ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š |
| created_at | timestamp | ä½œæˆæ—¥æ™‚ |
| updated_at | timestamp | æ›´æ–°æ—¥æ™‚ |

**settings ã®æ§‹é€ ï¼š**
```json
{
  "invite_frequency": "biweekly",
  "default_anonymous": false,
  "min_participants": 3,
  "reminder_enabled": true,
  "vote_deadline_days": 7
}
```

```sql
CREATE TABLE groups (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  line_group_id text UNIQUE NOT NULL,
  name text,
  created_by uuid REFERENCES users(id),
  settings jsonb DEFAULT '{
    "invite_frequency": "biweekly",
    "default_anonymous": false,
    "min_participants": 3,
    "reminder_enabled": true,
    "vote_deadline_days": 7
  }'::jsonb,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

CREATE INDEX idx_groups_line_group_id ON groups(line_group_id);
```

#### group_membersï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| group_id | uuid | FK â†’ groups |
| user_id | uuid | FK â†’ users |
| role | text | admin / member |
| joined_at | timestamp | å‚åŠ æ—¥æ™‚ |

```sql
CREATE TABLE group_members (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  group_id uuid REFERENCES groups(id) ON DELETE CASCADE,
  user_id uuid REFERENCES users(id) ON DELETE CASCADE,
  role text DEFAULT 'member' CHECK (role IN ('admin', 'member')),
  joined_at timestamptz DEFAULT now(),
  UNIQUE(group_id, user_id)
);

CREATE INDEX idx_group_members_group ON group_members(group_id);
CREATE INDEX idx_group_members_user ON group_members(user_id);
```

#### eventsï¼ˆç¢ºå®šäºˆå®šï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| group_id | uuid | FK â†’ groups |
| title | text | äºˆå®šã‚¿ã‚¤ãƒˆãƒ« |
| description | text | è©³ç´°ï¼ˆä»»æ„ï¼‰ |
| date | date | äºˆå®šæ—¥ |
| status | text | voting / confirmed / completed / cancelled / pending |
| created_by | uuid | FK â†’ users |
| vote_deadline | timestamp | æŠ•ç¥¨ç· åˆ‡æ—¥æ™‚ |
| created_at | timestamp | ä½œæˆæ—¥æ™‚ |
| updated_at | timestamp | æ›´æ–°æ—¥æ™‚ |

```sql
CREATE TABLE events (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  group_id uuid REFERENCES groups(id) ON DELETE CASCADE,
  title text NOT NULL,
  description text,
  date date,
  status text DEFAULT 'voting' CHECK (status IN ('voting', 'confirmed', 'completed', 'cancelled', 'pending')),
  created_by uuid REFERENCES users(id),
  vote_deadline timestamptz,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

CREATE INDEX idx_events_group ON events(group_id);
CREATE INDEX idx_events_status ON events(status);
CREATE INDEX idx_events_date ON events(date);
```

#### votesï¼ˆæ—¥ç¨‹æŠ•ç¥¨ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| event_id | uuid | FK â†’ events |
| user_id | uuid | FK â†’ users |
| date | date | æŠ•ç¥¨å¯¾è±¡ã®æ—¥ä»˜ |
| response | text | ok / maybe / ng |
| created_at | timestamp | æŠ•ç¥¨æ—¥æ™‚ |
| updated_at | timestamp | æ›´æ–°æ—¥æ™‚ |

```sql
CREATE TABLE votes (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  event_id uuid REFERENCES events(id) ON DELETE CASCADE,
  user_id uuid REFERENCES users(id) ON DELETE CASCADE,
  date date NOT NULL,
  response text NOT NULL CHECK (response IN ('ok', 'maybe', 'ng')),
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  UNIQUE(event_id, user_id, date)
);

CREATE INDEX idx_votes_event ON votes(event_id);
CREATE INDEX idx_votes_user ON votes(user_id);
```

#### wishesï¼ˆè¡ŒããŸã„äºˆå®šï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| group_id | uuid | FK â†’ groups |
| title | text | è¡ŒããŸã„å†…å®¹ |
| description | text | è©³ç´°ï¼ˆä»»æ„ï¼‰ |
| created_by | uuid | FK â†’ users |
| is_anonymous | boolean | åŒ¿åæŠ•ç¨¿ã‹ |
| status | text | open / voting / converted / archived |
| converted_to | uuid | FK â†’ eventsï¼ˆäºˆå®šã«å¤‰æ›ã•ã‚ŒãŸå ´åˆï¼‰ |
| created_at | timestamp | ä½œæˆæ—¥æ™‚ |

```sql
CREATE TABLE wishes (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  group_id uuid REFERENCES groups(id) ON DELETE CASCADE,
  title text NOT NULL,
  description text,
  created_by uuid REFERENCES users(id),
  is_anonymous boolean DEFAULT false,
  status text DEFAULT 'open' CHECK (status IN ('open', 'voting', 'converted', 'archived')),
  converted_to uuid REFERENCES events(id),
  created_at timestamptz DEFAULT now()
);

CREATE INDEX idx_wishes_group ON wishes(group_id);
CREATE INDEX idx_wishes_status ON wishes(status);
```

#### interestsï¼ˆèˆˆå‘³è¡¨æ˜ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| wish_id | uuid | FK â†’ wishes |
| user_id | uuid | FK â†’ users |
| created_at | timestamp | è¡¨æ˜æ—¥æ™‚ |

```sql
CREATE TABLE interests (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  wish_id uuid REFERENCES wishes(id) ON DELETE CASCADE,
  user_id uuid REFERENCES users(id) ON DELETE CASCADE,
  created_at timestamptz DEFAULT now(),
  UNIQUE(wish_id, user_id)
);

CREATE INDEX idx_interests_wish ON interests(wish_id);
```

#### remindersï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼‰

| ã‚«ãƒ©ãƒ  | å‹ | èª¬æ˜ |
|--------|-----|------|
| id | uuid | PK |
| group_id | uuid | FK â†’ groups |
| event_id | uuid | FK â†’ eventsï¼ˆä»»æ„ï¼‰ |
| type | text | invite / vote_reminder / week_before / day_before / day_of |
| scheduled_at | timestamp | äºˆå®šé€ä¿¡æ—¥æ™‚ |
| sent_at | timestamp | å®Ÿéš›ã®é€ä¿¡æ—¥æ™‚ï¼ˆnull = æœªé€ä¿¡ï¼‰ |
| created_at | timestamp | ä½œæˆæ—¥æ™‚ |

```sql
CREATE TABLE reminders (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  group_id uuid REFERENCES groups(id) ON DELETE CASCADE,
  event_id uuid REFERENCES events(id) ON DELETE CASCADE,
  type text NOT NULL CHECK (type IN ('invite', 'vote_reminder', 'week_before', 'day_before', 'day_of')),
  scheduled_at timestamptz NOT NULL,
  sent_at timestamptz,
  created_at timestamptz DEFAULT now()
);

CREATE INDEX idx_reminders_scheduled ON reminders(scheduled_at) WHERE sent_at IS NULL;
CREATE INDEX idx_reminders_group ON reminders(group_id);
```

---

## ğŸŒ API è¨­è¨ˆ

### LINE Webhook

```
POST /api/webhook
```

**å—ã‘å–ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆï¼š**

| ã‚¤ãƒ™ãƒ³ãƒˆ | å‡¦ç† |
|---------|------|
| follow | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| unfollow | ï¼ˆä½•ã‚‚ã—ãªã„ï¼‰ |
| join | ã‚°ãƒ«ãƒ¼ãƒ—ç™»éŒ²ã€ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ  |
| leave | ã‚°ãƒ«ãƒ¼ãƒ—å‰Šé™¤ |
| memberJoined | ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ  |
| memberLeft | ãƒ¡ãƒ³ãƒãƒ¼å‰Šé™¤ |
| message | ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†ï¼ˆå°†æ¥ç”¨ï¼‰ |
| postback | ãƒœã‚¿ãƒ³æŠ¼ä¸‹å‡¦ç† |

### LIFF ç”¨ API

#### ã‚°ãƒ«ãƒ¼ãƒ—

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | /api/groups | å‚åŠ ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ |
| GET | /api/groups/[id] | ã‚°ãƒ«ãƒ¼ãƒ—è©³ç´° |
| PATCH | /api/groups/[id]/settings | è¨­å®šæ›´æ–° |

#### äºˆå®šï¼ˆEventsï¼‰

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | /api/groups/[id]/events | äºˆå®šä¸€è¦§ |
| POST | /api/groups/[id]/events | äºˆå®šä½œæˆ |
| GET | /api/events/[id] | äºˆå®šè©³ç´° |
| PATCH | /api/events/[id] | äºˆå®šæ›´æ–° |
| DELETE | /api/events/[id] | äºˆå®šå‰Šé™¤ |
| POST | /api/events/[id]/confirm | äºˆå®šç¢ºå®š |

#### æŠ•ç¥¨ï¼ˆVotesï¼‰

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | /api/events/[id]/votes | æŠ•ç¥¨çŠ¶æ³ |
| POST | /api/events/[id]/votes | æŠ•ç¥¨é€ä¿¡ |
| PUT | /api/events/[id]/votes | æŠ•ç¥¨æ›´æ–° |

#### è¡ŒããŸã„ï¼ˆWishesï¼‰

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | /api/groups/[id]/wishes | è¡ŒããŸã„ä¸€è¦§ |
| POST | /api/groups/[id]/wishes | è¡ŒããŸã„è¿½åŠ  |
| DELETE | /api/wishes/[id] | è¡ŒããŸã„å‰Šé™¤ |
| POST | /api/wishes/[id]/interest | èˆˆå‘³è¿½åŠ  |
| DELETE | /api/wishes/[id]/interest | èˆˆå‘³å–æ¶ˆ |
| POST | /api/wishes/[id]/convert | äºˆå®šã«å¤‰æ› |

---

## ğŸ“± ç”»é¢è¨­è¨ˆ

### ç”»é¢ä¸€è¦§

| ç”»é¢ | ãƒ‘ã‚¹ | èª¬æ˜ |
|------|------|------|
| ãƒ›ãƒ¼ãƒ  | /liff | ç›´è¿‘ã®äºˆå®šã€é€šçŸ¥ |
| ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | /liff/calendar | æœˆè¡¨ç¤ºã§äºˆå®šç¢ºèª |
| äºˆå®šè©³ç´° | /liff/events/[id] | äºˆå®šã®è©³ç´°ã€æŠ•ç¥¨çŠ¶æ³ |
| æ—¥ç¨‹æŠ•ç¥¨ | /liff/events/[id]/vote | â—‹â–³âœ•å…¥åŠ› |
| è¡ŒããŸã„ãƒªã‚¹ãƒˆ | /liff/wishes | æ—¥ä»˜ãªã—äºˆå®šä¸€è¦§ |
| è¡ŒããŸã„è¿½åŠ  | /liff/wishes/new | æ–°è¦è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  |
| è¨­å®š | /liff/settings | ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š |

### ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 

#### ãƒ›ãƒ¼ãƒ ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  NextHang                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  ğŸ“… ç›´è¿‘ã®äºˆå®š              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1/15(æ°´) ğŸ– ç„¼è‚‰       â”‚  â”‚
â”‚  â”‚ æŠ•ç¥¨ä¸­ â†’ ã‚ã¨3æ—¥       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1/28(ç«) ğŸ¤ ã‚«ãƒ©ã‚ªã‚±   â”‚  â”‚
â”‚  â”‚ ç¢ºå®š â†’ 5äººå‚åŠ         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  â­ è¡ŒããŸã„ (3ä»¶)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ãƒ¦ãƒ‹ãƒ ğŸ‘€ 4äººèˆˆå‘³ã‚ã‚Š  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ ] [ğŸ“…] [â­] [âš™ï¸]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ—¥ç¨‹æŠ•ç¥¨ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ğŸ– ç„¼è‚‰ã®æ—¥ç¨‹              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚       â—€ 2025å¹´1æœˆ â–¶        â”‚
â”‚  æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ       â”‚
â”‚        1  2  3  4          â”‚
â”‚  5  6  7  8  9 10 11       â”‚
â”‚ 12 13 14 â­• 16 17 18       â”‚
â”‚ 19 20 21 22 23 24 25       â”‚
â”‚ 26 27 â–³ 29 30 31          â”‚
â”‚                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  é¸æŠä¸­ï¼š                   â”‚
â”‚  â­• 15(æ°´) è¡Œã‘ã‚‹           â”‚
â”‚  â–³ 28(ç«) å¾®å¦™             â”‚
â”‚                             â”‚
â”‚  [é€ä¿¡ã™ã‚‹]                 â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ ] [ğŸ“…] [â­] [âš™ï¸]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ã¾ã¨ã‚æŠ•ç¥¨ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† 2æœˆä¸­æ—¬ã®äºˆå®š             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  3ä»¶ã®äºˆå®šãŒã‚ã‚Šã¾ã™        â”‚
â”‚  ã¾ã¨ã‚ã¦å›ç­”ã—ã¦ã­         â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2/14(é‡‘) ğŸ– ç„¼è‚‰       â”‚  â”‚
â”‚  â”‚ â—‹ è¡Œã‘ã‚‹              â”‚  â”‚
â”‚  â”‚ â–³ å¾®å¦™   â† é¸æŠä¸­     â”‚  â”‚
â”‚  â”‚ âœ• ç„¡ç†               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2/16(æ—¥) ğŸ¤ ã‚«ãƒ©ã‚ªã‚±   â”‚  â”‚
â”‚  â”‚ â—‹ è¡Œã‘ã‚‹  â† é¸æŠä¸­    â”‚  â”‚
â”‚  â”‚ â–³ å¾®å¦™               â”‚  â”‚
â”‚  â”‚ âœ• ç„¡ç†               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  [ã¾ã¨ã‚ã¦é€ä¿¡]             â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¨­å®šç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¨­å®š                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  ğŸ“¢ ãŠèª˜ã„é »åº¦              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â—‹ æ¯é€±                â”‚  â”‚
â”‚  â”‚ â— 2é€±é–“ã”ã¨ â† é¸æŠä¸­  â”‚  â”‚
â”‚  â”‚ â—‹ æœˆ1å›               â”‚  â”‚
â”‚  â”‚ â—‹ ã‚ªãƒ•                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ğŸ™ˆ æŠ•ç¨¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ åŒ¿å      [OFF]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ğŸ‘¥ æœ€ä½å‚åŠ äººæ•°            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [  3  ] äºº            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ğŸ”” ãƒªãƒã‚¤ãƒ³ãƒ‰              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1é€±é–“å‰    [ON]       â”‚  â”‚
â”‚  â”‚ å‰æ—¥       [ON]       â”‚  â”‚
â”‚  â”‚ å½“æ—¥       [OFF]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  [ä¿å­˜]                     â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”” é€šçŸ¥è¨­è¨ˆ

### Bot ãŒé€ã‚‹é€šçŸ¥

| ç¨®é¡ | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | æ–‡é¢ä¾‹ |
|------|-----------|--------|
| å®šæœŸãŠèª˜ã„ | è¨­å®šã«å¿œã˜ã¦ | ã€ŒğŸ¤– ãã‚ãã‚éŠã³ã¾ã›ã‚“ã‹ï¼Ÿ\næœ€è¿‘ã®è¡ŒããŸã„ãƒªã‚¹ãƒˆã¯ã“ã¡ã‚‰â†’ã€ |
| æŠ•ç¥¨é–‹å§‹ | äºˆå®šä½œæˆæ™‚ | ã€ŒğŸ—³ æ–°ã—ã„äºˆå®šã®æŠ•ç¥¨ãŒå§‹ã¾ã‚Šã¾ã—ãŸï¼\nğŸ– ç„¼è‚‰\n[æŠ•ç¥¨ã™ã‚‹]ã€ |
| æŠ•ç¥¨ãƒªãƒã‚¤ãƒ³ãƒ‰ | ç· åˆ‡2æ—¥å‰ | ã€Œâ° æŠ•ç¥¨ç· åˆ‡ã¾ã§ã‚ã¨2æ—¥ï¼\nã¾ã ã®äººã¯æŠ•ç¥¨ã—ã¦ã­ã€ |
| äºˆå®šç¢ºå®š | ç¢ºå®šæ™‚ | ã€ŒğŸ‰ äºˆå®šãŒæ±ºã¾ã‚Šã¾ã—ãŸï¼\n1/15(æ°´) ç„¼è‚‰\nå‚åŠ è€…: 5äººã€ |
| 1é€±é–“å‰ | 7æ—¥å‰ | ã€ŒğŸ“… æ¥é€±ã®äºˆå®š\n1/15(æ°´) ç„¼è‚‰ã€ |
| å‰æ—¥ | 1æ—¥å‰ | ã€ŒğŸ“… æ˜æ—¥ã®äºˆå®š\nç„¼è‚‰ ğŸ–\nãŠå¿˜ã‚Œãªãï¼ã€ |
| å½“æ—¥ | å½“æ—¥æœ | ã€ŒğŸŠ ä»Šæ—¥ã¯ç„¼è‚‰ã®æ—¥ï¼\næ¥½ã—ã‚“ã§ãã¦ã­ã€ |
| ä¿ç•™ | äººæ•°ä¸è¶³æ™‚ | ã€ŒğŸ˜¢ ä»Šå›ã¯äººæ•°ãŒé›†ã¾ã‚Šã¾ã›ã‚“ã§ã—ãŸ\nã¾ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°è¦‹ã¦èãã¾ã™ã­ã€ |
| èˆˆå‘³é–¾å€¤è¶…ãˆ | é–¾å€¤åˆ°é”æ™‚ | ã€Œâ­ ãƒ¦ãƒ‹ãƒã«4äººèˆˆå‘³ã‚ã‚Šï¼\næ—¥ç¨‹æ±ºã‚ã¾ã›ã‚“ã‹ï¼Ÿ\n[æ—¥ç¨‹ã‚’æ±ºã‚ã‚‹]ã€ |

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
nexthang/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ sw.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts        # LINE Webhook
â”‚   â”‚   â”‚   â”œâ”€â”€ groups/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ wishes/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ votes/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ confirm/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â””â”€â”€ wishes/
â”‚   â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚   â”‚           â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚           â”œâ”€â”€ interest/
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚           â””â”€â”€ convert/
â”‚   â”‚   â”‚               â””â”€â”€ route.ts
â”‚   â”‚   â”œâ”€â”€ liff/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx          # LIFFå…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx            # ãƒ›ãƒ¼ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx    # äºˆå®šè©³ç´°
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ vote/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ wishes/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx        # è¡ŒããŸã„ãƒªã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ new/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx                # ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä»»æ„ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                     # æ±ç”¨UI
â”‚   â”‚   â”œâ”€â”€ calendar/               # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é–¢é€£
â”‚   â”‚   â”œâ”€â”€ vote/                   # æŠ•ç¥¨é–¢é€£
â”‚   â”‚   â””â”€â”€ liff/                   # LIFFé–¢é€£
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ use-liff.ts
â”‚   â”‚   â”œâ”€â”€ use-groups.ts
â”‚   â”‚   â”œâ”€â”€ use-events.ts
â”‚   â”‚   â””â”€â”€ use-wishes.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â”‚   â””â”€â”€ server.ts
â”‚   â”‚   â”œâ”€â”€ line/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts           # LINE API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.ts          # Webhook ãƒãƒ³ãƒ‰ãƒ©
â”‚   â”‚   â”‚   â””â”€â”€ messages.ts         # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ date.ts
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ database.ts             # Supabaseå‹
â”‚       â””â”€â”€ line.ts                 # LINEå‹
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/                 # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ functions/                  # Edge Functions
â”‚       â”œâ”€â”€ send-reminders/
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ send-invites/
â”‚           â””â”€â”€ index.ts
â”œâ”€â”€ .env.local
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

---

## ğŸ” ç’°å¢ƒå¤‰æ•°

```env
# LINE
LINE_CHANNEL_ID=
LINE_CHANNEL_SECRET=
LINE_CHANNEL_ACCESS_TOKEN=
LIFF_ID=

# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# App
NEXT_PUBLIC_APP_URL=https://nexthang.vercel.app
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### èªè¨¼ãƒ•ãƒ­ãƒ¼

```
LIFF çµŒç”±ã®ã‚¢ã‚¯ã‚»ã‚¹
    â†“
liff.getProfile() ã§ LINE ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå–å¾—
    â†“
API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã« LINE ãƒ¦ãƒ¼ã‚¶ãƒ¼ID ã‚’å«ã‚ã‚‹
    â†“
ã‚µãƒ¼ãƒãƒ¼å´ã§ LIFF ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
    â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ID ã¨ ã‚°ãƒ«ãƒ¼ãƒ—ID ã®ç´ä»˜ã‘ç¢ºèª
    â†“
ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯
```

### RLSï¼ˆRow Level Securityï¼‰

```sql
-- ä¾‹ï¼švotes ãƒ†ãƒ¼ãƒ–ãƒ«
ALTER TABLE votes ENABLE ROW LEVEL SECURITY;

-- ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ãªã‚‰å…¨å“¡ã®æŠ•ç¥¨ã‚’è¦‹ã‚Œã‚‹
CREATE POLICY "Group members can view votes"
  ON votes FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM events e
      JOIN group_members gm ON e.group_id = gm.group_id
      WHERE e.id = votes.event_id
      AND gm.user_id = current_user_id()
    )
  );
```

---

## ğŸ“… é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Phase 1ï¼ˆ2-3é€±é–“ï¼‰

- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
- [ ] LINE å…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [ ] DB ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼‰
- [ ] Webhook å®Ÿè£…ï¼ˆfollow, join, leaveï¼‰
- [ ] LIFF åŸºæœ¬ç”»é¢ï¼ˆãƒ›ãƒ¼ãƒ ï¼‰
- [ ] æ—¥ç¨‹æŠ•ç¥¨æ©Ÿèƒ½

### Phase 2ï¼ˆ2é€±é–“ï¼‰

- [ ] ãƒªãƒã‚¤ãƒ³ãƒ‰æ©Ÿèƒ½
- [ ] è¡ŒããŸã„ãƒªã‚¹ãƒˆ
- [ ] èˆˆå‘³æŠ•ç¥¨
- [ ] ã¾ã¨ã‚æŠ•ç¥¨
- [ ] è¨­å®šç”»é¢

### Phase 3ï¼ˆ2é€±é–“ï¼‰

- [ ] ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] Flex Message æ•´å‚™
- [ ] å®šæœŸãŠèª˜ã„ï¼ˆCronï¼‰
- [ ] ä¿ç•™â†’å¾©æ´»æ©Ÿèƒ½
- [ ] ãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£

### Phase 4ï¼ˆå°†æ¥ï¼‰

- [ ] ãŠã™ã™ã‚ææ¡ˆ
- [ ] Google Calendar é€£æº
- [ ] å¹´é–“ãƒ¬ãƒãƒ¼ãƒˆ

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [LINE Messaging API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.line.biz/ja/docs/messaging-api/)
- [LIFF ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.line.biz/ja/docs/liff/)
- [Supabase ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://supabase.com/docs)
- [Next.js ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [Vercel ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vercel.com/docs)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ |
|------|-----------|------|
| 2026/01/31 | v1.0 | åˆç‰ˆä½œæˆ |
